---
const servicios = [
  {
    imagen: "/img/iconos-servicios/Bibliotecas.png"
  },
  {
    imagen: "/img/iconos-servicios/Camas.png"
  },
  {
    imagen: "/img/iconos-servicios/Centro-de-entretenimiento.png"
  },
  {
    imagen: "/img/iconos-servicios/Closets.png"
  },
  {
    imagen: "/img/iconos-servicios/Cocinas.png"
  },
  {
    imagen: "/img/iconos-servicios/Escritorios.png"
  },
  {
    imagen: "/img/iconos-servicios/Muebles-de-baño.png"
  },
  {
    imagen: "/img/iconos-servicios/Puertas.png"
  }
];
---

<section class="py-10 px-4" id="servicios">
  <h2 class="text-3xl text-wood-dark font-semibold text-center">Nuestros Servicios</h2>
  <div class="max-w-7xl mx-auto">    
    <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6 sm:gap-8">
      {servicios.map((servicio, index) => (
        <div class={`servicio-card bg-white rounded-2xl shadow-xl overflow-hidden flex items-center justify-center p-4`} data-delay={index}>
          <img 
            src={servicio.imagen} 
            alt="Servicio de carpintería"
            class="w-32 h-32 sm:w-44 sm:h-44 lg:w-60 lg:h-60 object-contain transition-transform duration-300 hover:scale-105"
          />
        </div>
      ))}
    </div>
  </div>
</section>

<script type="module">
  const cards = Array.from(document.querySelectorAll(".servicio-card"));
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const el = entry.target;
          el.classList.add("visible");
          observer.unobserve(el);
        }
      });
    },
    { threshold: 0.2 }
  );

  cards.forEach((card, index) => {
    card.style.transitionDelay = `${index * 80}ms`;
    observer.observe(card);
  });
</script>

<style>
  .grid {
    grid-auto-rows: 1fr;
  }

  .servicio-card {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease, transform 0.6s ease;
  }

  .servicio-card.visible {
    opacity: 1;
    transform: translateY(0);
  }
</style>